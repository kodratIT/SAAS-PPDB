@startuml PPDB_SaaS_System_Context
!include https://raw.githubusercontent.com/plantuml-stdlib/C4-PlantUML/master/C4_Context.puml

LAYOUT_WITH_LEGEND()

title System Context Diagram - PPDB SaaS Platform

Person(super_admin, "Super Admin", "Platform administrator yang mengelola sistem dan tenant")
Person(school_admin, "School Admin", "Administrator sekolah yang mengelola PPDB")
Person(panitia, "Panitia PPDB", "Tim verifikasi dan seleksi peserta didik")
Person(student, "Calon Siswa", "Siswa yang mendaftar PPDB")
Person(parent, "Orang Tua", "Orang tua/wali calon siswa")

System(ppdb_saas, "PPDB SaaS Platform", "Platform multi-tenant untuk mengelola Penerimaan Peserta Didik Baru secara online")

System_Ext(firebase_auth, "Firebase Authentication", "Layanan autentikasi user (Email, Google OAuth)")
System_Ext(firestore, "Cloud Firestore", "NoSQL database untuk menyimpan data aplikasi")
System_Ext(firebase_storage, "Firebase Storage", "Cloud storage untuk dokumen dan file upload")
System_Ext(payment_gateway, "Payment Gateway", "Midtrans/Xendit untuk payment processing")
System_Ext(email_service, "Email Service", "SendGrid/Mailgun untuk notifikasi email")
System_Ext(maps_api, "Google Maps API", "Untuk geocoding dan map picker")

' Relationships - Super Admin
Rel(super_admin, ppdb_saas, "Mengelola tenant, subscription plans, analytics", "HTTPS")

' Relationships - School Admin
Rel(school_admin, ppdb_saas, "Konfigurasi PPDB, kelola pendaftar, verifikasi", "HTTPS")

' Relationships - Panitia
Rel(panitia, ppdb_saas, "Verifikasi dokumen, scoring, seleksi", "HTTPS")

' Relationships - Student & Parent
Rel(student, ppdb_saas, "Mendaftar PPDB, upload dokumen, cek status", "HTTPS")
Rel(parent, ppdb_saas, "Membantu proses pendaftaran anak", "HTTPS")

' System Dependencies
Rel(ppdb_saas, firebase_auth, "Autentikasi user", "Firebase SDK")
Rel(ppdb_saas, firestore, "Read/Write data", "Firebase SDK")
Rel(ppdb_saas, firebase_storage, "Upload/Download files", "Firebase SDK")
Rel(ppdb_saas, payment_gateway, "Process payments", "REST API")
Rel(ppdb_saas, email_service, "Send notifications", "REST API")
Rel(ppdb_saas, maps_api, "Geocoding, map display", "REST API")

' Bidirectional - Webhooks
Rel_Back(payment_gateway, ppdb_saas, "Payment status webhook", "HTTPS POST")

SHOW_LEGEND()

@enduml
